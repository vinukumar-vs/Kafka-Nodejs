# Kafka-NodeJs 
Using NodeJS connect to Kafka and write Kafka consumers and produsers in NodeJs application.

Postman collection should have
 * Producer - To generate kafka event to a topic of specific topic-group
 * Consumer - To get all the events generated by Producer and process it in Consumer.
 * Lag - What is the lag of kafka for better analysis and identify the invalid events.


## Setup Kafka
https://kafka.apache.org/downloads  

Download binary files(.tgz) adn extract locally  


## Running a Kafka broker in ZooKeeper mode
```
    ./bin/zookeeper-server-start.sh config/zookeeper.properties
    ./bin/kafka-server-start.sh config/server.properties
```

# API's for Kafka events

## Produder - Kafka events producer
```curl
curl --location 'http://localhost:3000/produce' \
--header 'Content-Type: application/json' \
--data '{
    "topic": "tripUpdates",
    "message": "46 - Trip 4002046 started"
}'
```

## Consumer - Kafka events consumer
```curl
curl --location 'http://localhost:3000/consume'
```

## Lag - Kafka events lag
```curl
curl --location 'http://localhost:3000/lag?topic=tripUpdates&groupId=trip-group'
```